#!/usr/bin/env python
# Copyright 2017 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

"""Exports local changes to web-platform-tests in Chromium to upstream repo.

This script checks LayoutTests/external/wpt for changes that can be exported,
then creates a patch, and creates and lands a pull request for the upstream
repository.
"""

import argparse
import logging

from webkitpy.common.host import Host
from webkitpy.w3c.test_exporter import TestExporter
from webkitpy.w3c.wpt_github import WPTGitHub


_log = logging.getLogger(__name__)


def main():
    logging.basicConfig(level=logging.INFO, format='%(message)s')

    parser = argparse.ArgumentParser(description=__doc__)
    parser.add_argument(
        '--dry-run', action='store_true',
        help='See what would be done without actually creating or merging '
             'any pull requests.')
    args = parser.parse_args()

    host = Host()
    wpt_github = WPTGitHub(host)
    test_exporter = TestExporter(host, wpt_github, dry_run=args.dry_run)

    test_exporter.run()


if __name__ == '__main__':
    main()
